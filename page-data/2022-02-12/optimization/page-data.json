{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/2022-02-12/optimization/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>React 그것이 알고싶다. [useMemo, useCallbak, React.memo 편]</h3>\n<p>리액트에서 최적화와 관련되어 공부를 하면 등장하는 3대장이 있다.<br>\n바로 useMemo, useCallback, React.memo인데 이 3대장에 대해서 한번 알아보도록 하자</p>\n<h3>최적화에 사용되는 Memoization</h3>\n<p>일단 Memoization이란 무슨 뜻일까?<br>\n일단 위키백과에는 다음과 같이 나와있다.</p>\n<blockquote>\n<p>컴퓨터 프로그램이 동일한 계산을 반복해야 할 때, 이전에 계산한 값을 메모리에 저장함으로써 동일한 계산의 반복 수행을 제거하여 프로그램 실행속도를 빠르게 하는 기술</p>\n</blockquote>\n<p>위 최적화 3대장 또한 이 Memoization을 기반으로 동작한다.<br>\n그럼 이 Memoization이 어떻게 사용되는지 확인해보자</p>\n<h3>useCallback</h3>\n<p>React공식문서에서 useCallback은 메모이제이션된 콜백을 반환한다고 되어있다.<br>\n함수를 memoized한다고 생각하면 이해가 쉽다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> memoizedCallback <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span>\r\n  <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// inline callback</span>\r\n  <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// dependency</span>\r\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>인라인 콜백과, 의존성 값의 배열을 전달하면 useCallback은 콜백의 메모이제이션된 버전을 반환한다고 되어있다.<br>\n그리고 함수 내에 참조하는 state, props가 있다면 의존성 배열에 추가해야한다.<br>\n위의 코드에서는 a, b의 값이 변경되지 않는다면 <b>(의존성 값이 변경되지 않는다면)</b> 함수가 새로 생성되지 않는다.<br>\n새로 생성되지 않는다는 것은 메모리에 새로 할당하지 않으며 기존의 동일한 참조 값을 사용한다는 것을 의미하고,<br>\n이는 최적화된 하위 컴포넌트에서 불필요한 렌더링을 줄일 수 있다는 것을 의미한다.<br>\n만약 의존성 값이 없다면 컴포넌트가 렌더링 되는 최초에 한번만 생성되며 이후에는 동일한 참조값을 사용하게 된다.</p>\n<p>컴포넌트가 렌더링 될 때마다 새로운 함수를 생성하여 자식 컴포넌트의 속성 값으로 입력하는 경우가 많은데<br>\n이런 경우에 useCallback을 이용하면 리액트의 랜더링 성능을 높여줄 수 있다.</p>\n<p>다음 코드는 useCallback을 이용한 예시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> ChangeEvent<span class=\"token punctuation\">,</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>form<span class=\"token punctuation\">,</span> setForm<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> name<span class=\"token operator\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span> skill<span class=\"token operator\">:</span> <span class=\"token string\">''</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> skill <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> form\r\n\r\n  <span class=\"token keyword\">const</span> onChange <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> ChangeEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> name<span class=\"token punctuation\">,</span> value <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target\r\n    <span class=\"token function\">setForm</span><span class=\"token punctuation\">(</span>form <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>form<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token operator\">:</span> value <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>input name<span class=\"token operator\">=</span><span class=\"token string\">\"name\"</span> value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>name<span class=\"token punctuation\">}</span> onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>input name<span class=\"token operator\">=</span><span class=\"token string\">\"skill\"</span> value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>skill<span class=\"token punctuation\">}</span> onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드는 useCallback을 사용하지 않는다면 input이 입력될 때마다 리렌더링이 진행되며 그때마다 onChange 함수를 다시 만들어준다.\r\n사용안 할때와 별 차이가 없을 것 같지만 나중에 해당 컴포넌트가 form state와 관계 없이 리렌더링 될 때 함수를 새로 생성해주는 것을 방지해준다.</p>\n<h3>useMemo</h3>\n<p>useMemo는 메모이제이션된 값을 반환해준다.<br>\n함수의 결과 값을 memoized하여 불필요한 연산을 관리한다고 보면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> memoizedValue <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token function\">computeExpensiveValue</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>a<span class=\"token punctuation\">,</span> b<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>useMemo의 특징은 일단 함수 호출 이후의 return 값이 memoized되며 두 번째 인자인 배열의 요소가 변경될 때마다\r\n첫번째 파라미터의 callback함수를 다시 생성하는 방식이다.<br>\nuseCallback을 이용하여 useMemo의 대체형태로 사용할 수도 있다.</p>\n<p>아래 코드는 첫번째, 두번째 숫자를 버튼을 눌러 증가시키는 코드다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// App.tsx</span>\r\n<span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useState <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n<span class=\"token keyword\">import</span> ShowCount <span class=\"token keyword\">from</span> <span class=\"token string\">'./ShowCount'</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">,</span> setFirst<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>second<span class=\"token punctuation\">,</span> setSecond<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increaseOne</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setFirst</span><span class=\"token punctuation\">(</span>prevState <span class=\"token operator\">=></span> prevState <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">increaseTwo</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token function\">setSecond</span><span class=\"token punctuation\">(</span>prevState <span class=\"token operator\">=></span> prevState <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"App\"</span><span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>increaseOne<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">+</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n        <span class=\"token operator\">&lt;</span>button onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>increaseTwo<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">+</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>ShowCount first<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>first<span class=\"token punctuation\">}</span> second<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>second<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> App</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// ShowCount.tsx</span>\r\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\r\n\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">PropsTypes</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  first<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\r\n  second<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getFirst</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'첫번째 숫자가 변동되었습니다.'</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token builtin\">number</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">getSecond</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">number</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token builtin\">console</span><span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'두번째 숫자가 변동되었습니다.'</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token builtin\">number</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ShowState</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> first<span class=\"token punctuation\">,</span> second <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> PropsTypes<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> showFirst <span class=\"token operator\">=</span> <span class=\"token function\">getFirst</span><span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> showSecond <span class=\"token operator\">=</span> <span class=\"token function\">getSecond</span><span class=\"token punctuation\">(</span>second<span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">{</span>showFirst<span class=\"token punctuation\">}</span> <span class=\"token operator\">&lt;</span>br <span class=\"token operator\">/</span><span class=\"token operator\">></span>\r\n      <span class=\"token punctuation\">{</span>showSecond<span class=\"token punctuation\">}</span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ShowState</code></pre></div>\n<p>각각 두번씩 눌렀을 때 다음과 같이 console이 출력된다.</p>\n<p align=\"center\"><img src='/images/React/optimization1.png' width='80%' alt='optimization1' /><p>\n<blockquote>\n<p>첫번째 아니면 두번째 버튼을 눌러 해당 state를 변경하려고 하는데 변경하고자 하는 state에 해당하지 않는 함수도 덩달아 실행된다니...\r\n너무 비효율적이다.</p>\n</blockquote>\n<p>이제 ShowCount 컴포넌트 내에서 useMemo를 사용해보자\r\n아래와 같이 해당 코드를 변경하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> showFirst <span class=\"token operator\">=</span> <span class=\"token function\">getFirst</span><span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> showSecond <span class=\"token operator\">=</span> <span class=\"token function\">getSecond</span><span class=\"token punctuation\">(</span>second<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token comment\">// 위 코드를 아래와 같이 변경</span>\r\n<span class=\"token keyword\">const</span> showFirst <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getFirst</span><span class=\"token punctuation\">(</span>first<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>first<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> showSecond <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">getSecond</span><span class=\"token punctuation\">(</span>second<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>second<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p align=\"center\"><img src='/images/React/optimization2.png' width='80%' alt='optimization2' /><p>\n<p>첫번째 숫자를 변경할 땐 <b>'첫번째 숫자가 변동되었습니다.'</b>만 뜨며<br>\n두번째 숫자를 변경 시 <b>'두번째 숫자가 변동되었습니다.'</b>만 뜨는 것을 확인할 수 있다.</p>\n<blockquote>\n<p>리액트 공식 홈페이지의 useMemo예시에보면 computeExpensiveValue이라는 함수가 들어가있다.<br>\n이처럼 memoization되는 값의 재계산 로직이 복잡한 경우 useMemo를 사용하는 것이 추천되며 성능상 큰 이점으로 작용된다.</p>\n</blockquote>\n<h3>React.memo</h3>\n<p>React.memo는 컴포넌트의 결과 값을 memoized해서 불필요한 리렌더링을 막는다.\r\n컴포넌트가 같은 props로 자주 렌더링되거나, 무겁고 비용이 큰 연산이 있다면 React.memo()로 컴포넌트를 래핑할 필요가 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">React.memo(Component, [areEqual(prevProps, nextProps)]);</code></pre></div>\n<p>React는 먼저 컴포넌트를 렌더링하고 이전 렌더된 결과와 비교해서 DOM 업데이트를 결정한다.\r\n만약 렌더링 결과가 이전과 다르면 React는 DOM을 업데이트해준다.<br>\n물론 위의 과정은 빠르게 이루어지지만 React.memo를 이용하면 이 과정의 속도를 좀 더 높일 수 있다.</p>\n<p>컴포넌트가 React.memo로 래핑 될 때, React는 컴포넌트를 렌더링하고 결과를 memoizing한다.<br>\n그리고 다음 렌더링이 일어날 때 props가 같다면, React는 memoizing된 내용을 재사용함으로써, React에서 리렌더링을 할 때 가상 DOM에서 달라진 부분을 확인하지 않게되어 성능상의 이점을 누릴 수 있다.\r\n<br/><br/>\r\n일단 다음과 같은 경우에 React.memo를 이용한다.</p>\n<ol>\n<li>Pure Functional Component에서</li>\n<li>Rendering이 자주일어날 경우</li>\n<li>re-rendering이 되는 동안에도 계속 같은 props값이 전달될 경우</li>\n<li>UI element의 양이 많은 컴포넌트의 경우</li>\n</ol>\n<p>예시를 살펴보자.<br>\n함수형 컴포넌트 Todo가 React.memo()로 래핑되어 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">function</span> <span class=\"token function\">Todo</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> todo<span class=\"token punctuation\">,</span> desc <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Todo title<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>todo<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n      <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Todo desc<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>desc<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> MemoizedTodo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Todo<span class=\"token punctuation\">)</span></code></pre></div>\n<p>MemoizedTodo의 렌더링 결과는 memoizing되어 있다.<br>\n만약 todo나 desc같은 props가 변경 되지 않는다면 다음 렌더링에도 memoizing된 결과를 그대로 사용한다.</p>\n<h3>props 동등 비교 커스터마이징</h3>\n<p>React.memo()는 props 혹은 props 객체를 비교할 때 얕은 비교를 한다.<br>\n비교 방식을 수정하고 싶다면 React.memo 두 번째 매개변수로 비교함수를 만들어 넘겨준다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">todoPropsAreEqual</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prevTodo<span class=\"token punctuation\">,</span> nextTodo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">return</span> prevTodo<span class=\"token punctuation\">.</span>todo <span class=\"token operator\">===</span> nextTodo<span class=\"token punctuation\">.</span>todo <span class=\"token operator\">&amp;&amp;</span> prevTodo<span class=\"token punctuation\">.</span>desc <span class=\"token operator\">===</span> nextTodo<span class=\"token punctuation\">.</span>desc\r\n<span class=\"token punctuation\">}</span>\r\n\r\n<span class=\"token keyword\">const</span> MemoizedTodo <span class=\"token operator\">=</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">memo</span><span class=\"token punctuation\">(</span>Todo<span class=\"token punctuation\">,</span> todoPropsAreEqual<span class=\"token punctuation\">)</span></code></pre></div>\n<p>nextTodo와 prevTodo가 같다면 true를 반환한다.</p>","frontmatter":{"title":"useMemo, useCallback, React.memo","summary":"최적화 3대장 useMemo, UseCallback, React.memo에 대해서 알아보자","date":"2022.02.12.","categories":["React","최적화"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHklEQVQoz2NggAMmJhBiZASRVACMjCBEWBEDA5O0PKOIOIOgCJOsEooU3DkQsyAORNHOK8Bs5coSGM8SksJi48HIJwgSFBRm5OAk7EAmDX3WlFKWnDqWzGqW9ComTQMmfiHWwHhWW3dmWSUmYXEQEpNk5BdkVtNlMXdAtpaf2dGHOTCeuayHubiDJTyN2d6LWUmTI6eePSyVPbGQzTOM3TOMI6mYzTOURdOQLTAexcOMcsos0dksKWWsKWUs8fmM8iqMbOzM2sbM6rqsZg4s6noseqasRtYsRtbMGgYsemaMLKxI7ubkZjaxZXYLYvEIZTZ3ZOTiISVKGBgYhUQZePkZuLgZhcUQ8cTIBI0teFDD1JMXsXiSBCMDyDbiAAC9GyFNzFepXAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/05c747946e6af1bf9553069c57fc8845/7002e/react_thumbnail.jpg","srcSet":"/static/05c747946e6af1bf9553069c57fc8845/e8044/react_thumbnail.jpg 400w,\n/static/05c747946e6af1bf9553069c57fc8845/a09fe/react_thumbnail.jpg 800w,\n/static/05c747946e6af1bf9553069c57fc8845/7002e/react_thumbnail.jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"},"sources":[{"srcSet":"/static/05c747946e6af1bf9553069c57fc8845/a29e4/react_thumbnail.webp 400w,\n/static/05c747946e6af1bf9553069c57fc8845/64466/react_thumbnail.webp 800w,\n/static/05c747946e6af1bf9553069c57fc8845/e0e60/react_thumbnail.webp 1600w","type":"image/webp","sizes":"(min-width: 1600px) 1600px, 100vw"}]},"width":1600,"height":900}},"publicURL":"/static/05c747946e6af1bf9553069c57fc8845/react_thumbnail.png"}}}}]}},"pageContext":{"slug":"/2022-02-12/optimization/"}},
    "staticQueryHashes": []}