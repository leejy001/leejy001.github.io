{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/2022-01-02/react_component_type/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h3>React 그것이 알고싶다. [Component Type 편]</h3>\n<p>회사에서 React + Typescript를 사용하여 개발을 진행하면서 어렵다고 생각했던 부분 중 하나가 컴포넌트의 타입을\r\n어떻게 지정하는가에 대한 부분이었다.<br>\n관련 자료를 찾아보다가 <a href=\"https://stackoverflow.com/questions/58123398/when-to-use-jsx-element-vs-reactnode-vs-reactelement\">StackOverFlow</a>에 좋은 답변이 있었고 <a href=\"https://github.com/DefinitelyTyped/DefinitelyTyped/blob/2034c45/types/react/index.d.ts#L203\">definitelyTyped</a>도 확인 해볼 수 있었다.</p>\n<h3>1. JSX.Element, ReactElement, ReactNode의 차이점이 뭘까?</h3>\n<p>JSX는 바벨에 의해서 <b>React.createElement(component, props, ...children)</b>을 사용하도록 코드가 변환된다.<br>\nJSX를 이용하면 html 처럼 생긴 문법을 리액트 라이브러리의 렌더링 함수로 변환한다.\r\n그렇기에 <a href=\"https://ko.reactjs.org/docs/react-without-jsx.html\">JSX를 사용하지 않고 리액트를 사용할 수 있지만</a> 매우 불편하다.</p>\n<p>예시로 다음처럼 JSX로 작성한 코드는</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Hello <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>toWhat<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>Hello toWhat<span class=\"token operator\">=</span><span class=\"token string\">\"World\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>다음과 같이 JSX를 사용하지 않는 코드로 컴파일될 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Hello</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">return</span> React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">'div'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Hello </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>toWhat<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\r\n  React<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span>Hello<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> toWhat<span class=\"token operator\">:</span> <span class=\"token string\">'World'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>위의 코드가 변환되는 것은 <a href=\"https://babeljs.io/repl/#?browsers=defaults%2C%20not%20ie%2011%2C%20not%20ie_mob%2011&#x26;build=&#x26;builtIns=false&#x26;corejs=3.6&#x26;spec=false&#x26;loose=false&#x26;code_lz=GYVwdgxgLglg9mABACwKYBt1wBQEpEDeAUIogE6pQhlIA8AJjAG4B8AEhlogO5xnr0AhLQD0jVgG4iAXyJA&#x26;debug=false&#x26;forceAllTransforms=false&#x26;shippedProposals=false&#x26;circleciRepo=&#x26;evaluate=false&#x26;fileSize=false&#x26;timeTravel=false&#x26;sourceType=module&#x26;lineWrap=true&#x26;presets=react&#x26;prettier=false&#x26;targets=&#x26;version=7.16.7&#x26;externalPlugins=&#x26;assumptions=%7B%7D\">다음 사이트</a>에서 직접 확인해볼 수 있다.</p>\n<p>이 <b>React.createElement</b>의 리턴 타입이 바로 <b>ReactElement</b>와 <b>JSX.Element</b>이다.</p>\n<p align=\"center\"><img src='/images/React/react_component_type.png' width='70%' alt='react component'/></P>\n<p>ReactElement와 JSX.Element는 묶어서 생각해도 좋다.\r\nJSX.Element의 <b>제네릭 인터페이스</b>가 ReactElement다.</p>\n<h3>1. ReactElement</h3>\n<p>ReactElement는 type과 props 그리고 key를 가진 객체다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Key</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span>\r\n\r\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">ReactElement<span class=\"token operator\">&lt;</span>\r\n  <span class=\"token constant\">P</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token constant\">T</span> <span class=\"token keyword\">extends</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> JSXElementConstructor<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span> <span class=\"token operator\">=</span>\r\n    <span class=\"token operator\">|</span> <span class=\"token builtin\">string</span>\r\n    <span class=\"token operator\">|</span> JSXElementConstructor<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\r\n<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\r\n  type<span class=\"token operator\">:</span> <span class=\"token constant\">T</span>\r\n  props<span class=\"token operator\">:</span> <span class=\"token constant\">P</span>\r\n  key<span class=\"token operator\">:</span> Key <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>2. JSX.Element</h3>\n<p>JSX.Element는 props와 any type을 제네릭 타입으로 가지고 있는 ReactEelement이다.<br>\nJSX는 React의 <b>global namespace</b>에 있기 때문에, 다양한 라이브러리들이 자체적으로 JSX를 구현하여 사용한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">declare</span> global <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">namespace</span> <span class=\"token constant\">JSX</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">interface</span> <span class=\"token class-name\">Element</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React</span><span class=\"token punctuation\">.</span>ReactElement<span class=\"token operator\">&lt;</span><span class=\"token builtin\">any</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">any</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>예시</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span> <span class=\"token comment\">// &lt;- ReactElement = JSX.Element</span>\r\n  <span class=\"token operator\">&lt;</span>Custom<span class=\"token operator\">></span> <span class=\"token comment\">// &lt;- ReactElement = JSX.Element</span>\r\n    <span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token string\">\"test\"</span><span class=\"token punctuation\">}</span> <span class=\"token comment\">// &lt;- ReactNode</span>\r\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Custom<span class=\"token operator\">></span>\r\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span></code></pre></div>\n<h3>3. ReactNode</h3>\n<p>ReactNode는 클래스 컴포넌트에서 <b>render()</b> 메소드를 통해 반환된다.<br>\nrender() 메소드는 클래스 컴포넌트에서 필수적으로 필요하며 render() 메소드가 호출될 시 this.props와 this.state를 활용하여 아래 타입중 하나를 반환하게 된다.</p>\n<p><b>React elements</b>: JSX를 통해 생성한다. 컴포넌트를 JSON으로 표현한 것<br>\n<b>Arrays and fragments</b>: render()를 통해서 여러 개의 element들을 반환한다.<br>\n<b>Portals</b>: 별도의 DOM 하위 트리에 자식 엘리먼트를 렌더링 하게 해준다.<br>\n<b>String and numbers</b>: 이 값들은 DOM 상에 텍스트 노드로서 렌더링 된다.<br>\n<b>Boolean or null</b>: 아무것도 렌더링하지 않는다.<br>\n(대부분의 경우 <code class=\"language-text\">return {boolean} &amp;&amp; &lt;Child /></code> 패턴을 지원하는데 사용한다.)\r\n<br/><br/>\r\n<strong>render() 함수는 순수해야 한다.</strong><br>\n컴포넌트의 state를 변경하지 않으면서 호출 시 동일한 결과를 반환하고 브러우저와 직접적으로 상호작용하지 않는다.\r\n이러한 render() 메소드는 통해 반환되는 값이 <b>ReactNode</b>이며 위의 타입들을 모두 포함한다.</p>\n<p>또 ReactNode는 ReactElement의 <b>superset(상위집합)</b>이라고 할 수 있다.<br>\nReactNode는 ReactElement, ReactFragment, string, ReactNode의 Array, null, undefind, boolean과 같이 좀더 유연한 타입을 정의할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">ReactText</span> <span class=\"token operator\">=</span> <span class=\"token builtin\">string</span> <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span>\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ReactChild</span> <span class=\"token operator\">=</span> ReactElement <span class=\"token operator\">|</span> ReactText\r\n\r\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">ReactNodeArray</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\"><span class=\"token builtin\">Array</span><span class=\"token operator\">&lt;</span>ReactNode<span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ReactFragment</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">|</span> ReactNodeArray\r\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">ReactNode</span> <span class=\"token operator\">=</span>\r\n  <span class=\"token operator\">|</span> ReactChild\r\n  <span class=\"token operator\">|</span> ReactFragment\r\n  <span class=\"token operator\">|</span> ReactPortal\r\n  <span class=\"token operator\">|</span> <span class=\"token builtin\">boolean</span>\r\n  <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span>\r\n  <span class=\"token operator\">|</span> <span class=\"token keyword\">undefined</span></code></pre></div>\n<h3>4. 클래스 컴포넌드와 함수형 컴포넌트의 render시 return 값 차이</h3>\n<p>클래스 컴포넌트는 ReactNode를 render()와 함께 return하며 ReactNode는 그 자체로 다양한 타입을 지닌다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ReactNode<span class=\"token punctuation\">;</span></code></pre></div>\n<p>함수형 컴포넌트는 ReactElement를 return한다.<br>\n함수형은 <b>stateless components</b>이다.<br>\n<b>stateless components</b>: component 내부에서 state를 사용하지 않는 (리렌더링이 없는) component 의미</p>\n<p>ReactElement는 object 형태로 null 값을 가지고 있지 않기 때문에 union을 사용해서 null값을 줘야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">StatelessComponent<span class=\"token operator\">&lt;</span><span class=\"token constant\">P</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> <span class=\"token constant\">P</span> <span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">{</span> children<span class=\"token operator\">?</span><span class=\"token operator\">:</span> ReactNode <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> context<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">any</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ReactElement <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>예시</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> Example <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ReactElement <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">null</span>\r\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span><span class=\"token boolean\">false</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"React Component Types","summary":"JSX.Element, ReactElement, ReactNode에 대해 비교해보자","date":"2022.01.02.","categories":["React"],"showThumbnail":true,"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABHklEQVQoz2NggAMmJhBiZASRVACMjCBEWBEDA5O0PKOIOIOgCJOsEooU3DkQsyAORNHOK8Bs5coSGM8SksJi48HIJwgSFBRm5OAk7EAmDX3WlFKWnDqWzGqW9ComTQMmfiHWwHhWW3dmWSUmYXEQEpNk5BdkVtNlMXdAtpaf2dGHOTCeuayHubiDJTyN2d6LWUmTI6eePSyVPbGQzTOM3TOMI6mYzTOURdOQLTAexcOMcsos0dksKWWsKWUs8fmM8iqMbOzM2sbM6rqsZg4s6noseqasRtYsRtbMGgYsemaMLKxI7ubkZjaxZXYLYvEIZTZ3ZOTiISVKGBgYhUQZePkZuLgZhcUQ8cTIBI0teFDD1JMXsXiSBCMDyDbiAAC9GyFNzFepXAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/05c747946e6af1bf9553069c57fc8845/7002e/react_thumbnail.jpg","srcSet":"/static/05c747946e6af1bf9553069c57fc8845/e8044/react_thumbnail.jpg 400w,\n/static/05c747946e6af1bf9553069c57fc8845/a09fe/react_thumbnail.jpg 800w,\n/static/05c747946e6af1bf9553069c57fc8845/7002e/react_thumbnail.jpg 1600w","sizes":"(min-width: 1600px) 1600px, 100vw"},"sources":[{"srcSet":"/static/05c747946e6af1bf9553069c57fc8845/a29e4/react_thumbnail.webp 400w,\n/static/05c747946e6af1bf9553069c57fc8845/64466/react_thumbnail.webp 800w,\n/static/05c747946e6af1bf9553069c57fc8845/e0e60/react_thumbnail.webp 1600w","type":"image/webp","sizes":"(min-width: 1600px) 1600px, 100vw"}]},"width":1600,"height":900}},"publicURL":"/static/05c747946e6af1bf9553069c57fc8845/react_thumbnail.png"}}}}]}},"pageContext":{"slug":"/2022-01-02/react_component_type/"}},
    "staticQueryHashes": []}